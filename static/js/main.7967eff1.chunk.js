(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{15:function(e,t,a){e.exports={backdrop:"Modal_backdrop__1SpeL",content:"Modal_content__1ukYV",closeIcon:"Modal_closeIcon__XwIWv"}},19:function(e,t,a){e.exports={item:"ImageGalleryItem_item__vDMHR",image:"ImageGalleryItem_image__3LzOK"}},21:function(e,t,a){e.exports={container:"Container_container__3IZbh"}},23:function(e,t,a){e.exports={btn:"Button_btn__1XeQF"}},25:function(e,t,a){e.exports={image:"ImageGalleryView_image__1pySI"}},27:function(e,t,a){e.exports={gallery:"ImageGallery_gallery__39a0W"}},35:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a(1),c=a.n(r),o=a(6),i=a.n(o),s=(a(35),a(3)),u=a(4),l=(a(36),a(21)),b=a.n(l);function j(e){var t=e.children;return Object(n.jsx)("div",{className:b.a.container,children:t})}var d=a(22),h=a(0);var f={useStateWithLabel:function(e,t){var a=Object(r.useState)(e),n=Object(s.a)(a,2),c=n[0],o=n[1];return Object(r.useDebugValue)("".concat(t,": ").concat(c)),[c,o]},usePrevious:function(e){var t=Object(r.useRef)();return Object(r.useEffect)((function(){t.current=e})),t.current}},g=a(9),m=a.n(g),p=f.useStateWithLabel;var O=function(e){var t=e.getSearchQuery,a=p("","value"),c=Object(s.a)(a,2),o=c[0],i=c[1],l=Object(r.useRef)(null);return Object(n.jsx)("header",{className:m.a.searchbar,children:Object(n.jsxs)("form",{className:m.a.form,onSubmit:function(e){e.preventDefault();var a=o.toLowerCase().trim();if(""===a)return u.b.error("Please enter a query"),void l.current.blur();t(a),i(""),l.current.blur()},children:[Object(n.jsx)("button",{type:"submit",className:m.a.btn,ref:l,children:Object(n.jsx)(h.b.Provider,{value:{size:"16px"},children:Object(n.jsx)(d.a,{})})}),Object(n.jsx)("input",{className:m.a.input,type:"text",value:o,placeholder:"Search images and photos",onChange:function(e){return i(e.target.value)}})]})})},v=a(23),x=a.n(v);var _=function(e){var t=e.updateSearchPage;return Object(n.jsx)("button",{className:x.a.btn,onClick:t,children:"Load more"})},y=a(24),I=a(20),w=a(29),S=a(28),k=a.n(S),P=a(12),L=a.n(P),N=a(25),M=a.n(N),C=a(10),E=a.n(C),B=a(18),Q="18962627-3cde470dd8252503102b1f7f8",R="https://pixabay.com/api/";function F(){return(F=Object(B.a)(E.a.mark((function e(t){var a,n,r=arguments;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:1,n="".concat(R,"?image_type=photo&orientation=horizontal&q=").concat(t,"&page=").concat(a,"&per_page=12&key=").concat(Q),e.abrupt("return",W(n).then((function(e){return e})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e){return q.apply(this,arguments)}function q(){return(q=Object(B.a)(E.a.mark((function e(t){var a,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var z={fetchImages:function(e){return F.apply(this,arguments)}},D=a.p+"static/media/initialScreenPlaceholder.6b48318a.jpg",G=a.p+"static/media/errorPlaceholder.8bd4b3d9.jpg",U=a(26),A=a(15),H=a.n(A),T=document.querySelector("#modal-root");var K=function(e){var t=e.toggleModal,a=e.children;return Object(r.useEffect)((function(){var e=function(e){"Escape"===e.code&&t()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}})),Object(o.createPortal)(Object(n.jsx)("div",{className:H.a.backdrop,onClick:function(e){e.target===e.currentTarget&&t()},children:Object(n.jsxs)("div",{className:H.a.content,children:[Object(n.jsx)("button",{className:H.a.closeIcon,onClick:function(){return t()},children:Object(n.jsx)(h.b.Provider,{value:{size:"36px"},children:Object(n.jsx)(U.a,{})})}),a]})}),T)},V=a(27),X=a.n(V),J=a(19),Y=a.n(J);var Z=function(e){var t=e.image,a=e.showBigImageInModal;return Object(n.jsx)("li",{className:Y.a.item,children:Object(n.jsx)(L.a,{src:t.webformatURL,placeholder:t.previewURL,children:function(e,r){return Object(n.jsx)("img",{style:{opacity:r?.5:1},src:e,alt:t.tags,"data-image":t.largeImageURL,className:Y.a.image,onClick:a})}})})};var $=function(e){var t=e.images,a=e.showBigImageInModal;return Object(n.jsx)("ul",{className:X.a.gallery,children:t&&t.map((function(e){return Object(n.jsx)(Z,{image:e,showBigImageInModal:a},e.id)}))})};function ee(){var e=Object(y.a)(["\n               margin-top: 80px;\n              "]);return ee=function(){return e},e}var te="idle",ae="pending",ne="resolved",re="rejected",ce=f.useStateWithLabel,oe=f.usePrevious;var ie=function(e){var t=e.searchQuery,a=e.page,c=e.resetSearchPage,o=e.updateImageAvialability,i=ce(null,"images"),l=Object(s.a)(i,2),b=l[0],j=l[1],d=ce(null,"totalSearchResults"),h=Object(s.a)(d,2),f=h[0],g=h[1],m=ce(te,"status"),p=Object(s.a)(m,2),O=p[0],v=p[1],x=ce(!1,"modalIsOpen"),_=Object(s.a)(x,2),y=_[0],S=_[1],P=ce("","imageInModal"),N=Object(s.a)(P,2),C=N[0],E=N[1],B=ce("","activeImage"),Q=Object(s.a)(B,2),R=Q[0],F=Q[1],W=oe(t);Object(r.useEffect)((function(){W!==t&&""!==t&&(c(),v(ae),z.fetchImages(t).then((function(e){return console.log(e),0===e.totalHits?(u.b.error("No images for ".concat(t,". Please try another query.")),void v(re)):0===e.hits.length?(u.b.error("Oops! Pixabay failed us and forgot to send images. Please refresh page & try again."),void v(re)):(j(e.hits),g(e.totalHits),void v(ne))})).catch((function(e){v(re)})))}),[W,c,t,j,v,g,o]),Object(r.useEffect)((function(){if(b&&O===ne){var e=f>b.length;o(e)}else o(!1)}),[b,O,f,o]);var q=oe(a);Object(r.useEffect)((function(){q<a&&z.fetchImages(t,a).then((function(e){j((function(t){return[].concat(Object(I.a)(t),Object(I.a)(e.hits))}))})).catch((function(e){v(re)})).finally((function(e){window.scrollTo({top:document.documentElement.scrollHeight-1300,behavior:"smooth"})}))}),[a,q,t,j,v,o]);var U=function(){S((function(e){return!e})),E(""),F("")};return O===te?Object(n.jsx)("div",{children:Object(n.jsx)("img",{src:D,alt:"please enter a query"})}):O===ae?Object(n.jsx)(k.a,{css:Object(w.a)(ee()),size:200,color:"purple",loading:!0}):O===re?Object(n.jsx)("div",{children:Object(n.jsx)("img",{src:G,alt:"error"})}):O===ne?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)($,{images:b,showBigImageInModal:function(e){U(),E((function(t){return t?"":e.target.dataset.image})),F((function(t){return t?"":e.target.src}))}}),y&&Object(n.jsx)(K,{toggleModal:U,children:Object(n.jsx)(L.a,{src:C,placeholder:R,children:function(e,t){return Object(n.jsx)("img",{style:{opacity:t?.5:1},src:e,alt:"",className:M.a.image})}})})]}):void 0},se=f.useStateWithLabel;var ue=function(){var e=se("","searchQuery"),t=Object(s.a)(e,2),a=t[0],r=t[1],c=se(1,"searchPage"),o=Object(s.a)(c,2),i=o[0],l=o[1],b=se(!1,"moreImagesAvailable"),d=Object(s.a)(b,2),h=d[0],f=d[1];return Object(n.jsxs)(j,{children:[Object(n.jsx)(O,{getSearchQuery:function(e){return r(e)}}),Object(n.jsx)(ie,{searchQuery:a,page:i,resetSearchPage:function(){return l(1)},updateImageAvialability:function(e){return f(e)}}),h&&Object(n.jsx)(_,{updateSearchPage:function(){return l((function(e){return e+1}))}}),Object(n.jsx)(u.a,{autoClose:3e3})]})},le=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,48)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;a(e),n(e),r(e),c(e),o(e)}))};i.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(ue,{})}),document.getElementById("root")),le()},9:function(e,t,a){e.exports={searchbar:"Searchbar_searchbar__37QUO",form:"Searchbar_form__1hoBD",input:"Searchbar_input__3kKeG",btn:"Searchbar_btn__1AtKX","react-icons":"Searchbar_react-icons__19UOg"}}},[[46,1,2]]]);
//# sourceMappingURL=main.7967eff1.chunk.js.map